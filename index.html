<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Segment Test Page</title>
   <script>
  !function(){var i="analytics",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel='canonical']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="WwGMq86D9HOfcZj4lsi3vKz1JNCBCEuQ";;analytics.SNIPPET_VERSION="5.2.0";
  analytics.load("WwGMq86D9HOfcZj4lsi3vKz1JNCBCEuQ");
  analytics.page();
  }}();
</script>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 800px;
      margin: 50px auto;
      padding: 20px;
      background: #f5f5f5;
    }
    .section {
      background: white;
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    h2 {
      color: #333;
      border-bottom: 2px solid #007bff;
      padding-bottom: 10px;
    }
    input, button {
      padding: 10px;
      margin: 5px;
      font-size: 16px;
    }
    button {
      background: #007bff;
      color: white;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover {
      background: #0056b3;
    }
    .product {
      border: 1px solid #ddd;
      padding: 15px;
      margin: 10px 0;
      border-radius: 4px;
    }
    .log {
      background: #1e1e1e;
      color: #00ff00;
      padding: 15px;
      border-radius: 4px;
      font-family: monospace;
      max-height: 300px;
      overflow-y: auto;
    }
    .log-entry {
      margin: 5px 0;
      padding: 5px;
      border-left: 3px solid #00ff00;
      padding-left: 10px;
    }
  </style>
</head>
<body>
  <h1>ðŸ›’ Simple Segment E-commerce Demo</h1>

  <!-- 1. Identify User -->
  <div class="section">
    <h2>1. Identify User</h2>
    <p>Method: <code>analytics.identify()</code></p>
    <form id="signup-form">
      <input type="text" id="name" placeholder="Your Name" required>
      <input type="email" id="email" placeholder="Your Email" required>
      <button type="submit">Sign Up</button>
    </form>
  </div>

  <!-- 2. Track Product View -->
  <div class="section">
    <h2>2. View Product</h2>
    <p>Method: <code>analytics.track('Product Viewed')</code></p>
    <div class="product">
      <h3>Wireless Headphones - $99.99</h3>
      <button onclick="viewProduct()">View Product</button>
    </div>
  </div>

  <!-- 3. Add to Cart -->
  <div class="section">
    <h2>3. Add to Cart</h2>
    <p>Method: <code>analytics.track('Product Added')</code></p>
    <button onclick="addToCart()">Add Headphones to Cart</button>
  </div>

  <!-- 4. Checkout -->
  <div class="section">
    <h2>4. Complete Order</h2>
    <p>Method: <code>analytics.track('Order Completed')</code></p>
    <button onclick="checkout()">Complete Checkout</button>
  </div>

  <!-- 5. Custom Event -->
  <div class="section">
    <h2>5. Custom Event</h2>
    <p>Method: <code>analytics.track('Custom Event')</code></p>
    <button onclick="customEvent()">Subscribe to Newsletter</button>
  </div>

  <!-- Event Log -->
  <div class="section">
    <h2>ðŸ“Š Event Log</h2>
    <p>Check browser console (F12) for detailed output</p>
    <div class="log" id="log"></div>
  </div>

  <script>
    // Helper to log events
    function log(message, data) {
      const logDiv = document.getElementById('log');
      const entry = document.createElement('div');
      entry.className = 'log-entry';
      entry.innerHTML = `<strong>${message}</strong><br>${JSON.stringify(data, null, 2)}`;
      logDiv.insertBefore(entry, logDiv.firstChild);
      console.log('Segment:', message, data);
    }

    // 1. Identify User
    document.getElementById('signup-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const name = document.getElementById('name').value;
      const email = document.getElementById('email').value;

      analytics.identify(email, {
        name: name,
        email: email
      });

      log('IDENTIFY', { name, email });
      alert('User identified!');
    });

    // 2. View Product
    function viewProduct() {
      analytics.track('Product Viewed', {
        product_id: 'headphones_001',
        name: 'Wireless Headphones',
        price: 99.99,
        category: 'Audio'
      });

      log('TRACK: Product Viewed', {
        product_id: 'headphones_001',
        name: 'Wireless Headphones',
        price: 99.99
      });
    }

    // 3. Add to Cart
    function addToCart() {
      analytics.track('Product Added', {
        product_id: 'headphones_001',
        name: 'Wireless Headphones',
        price: 99.99,
        quantity: 1
      });

      log('TRACK: Product Added', {
        product_id: 'headphones_001',
        quantity: 1
      });
      alert('Added to cart!');
    }

    // 4. Checkout
    function checkout() {
      analytics.track('Order Completed', {
        order_id: 'order_' + Date.now(),
        total: 99.99,
        products: [{
          product_id: 'headphones_001',
          name: 'Wireless Headphones',
          price: 99.99,
          quantity: 1
        }]
      });

      log('TRACK: Order Completed', {
        order_id: 'order_' + Date.now(),
        total: 99.99
      });
      alert('Order completed!');
    }

    // 5. Custom Event
    function customEvent() {
      analytics.track('Newsletter Subscribed', {
        source: 'website',
        timestamp: new Date().toISOString()
      });

      log('TRACK: Newsletter Subscribed', {
        source: 'website'
      });
      alert('Subscribed to newsletter!');
    }

    // Log page load
    log('PAGE LOADED', { url: window.location.href });
  </script>
</body>
</html>
